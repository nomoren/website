"object"!=typeof JSON&&(JSON={}),function(){"use strict";var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r,o,i,n,c,a=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,c=[],"[object Array]"===Object.prototype.toString.apply(u)){for(n=u.length,r=0;r<n;r+=1)c[r]=str(r,u)||"null";return i=0===c.length?"[]":gap?"[\n"+gap+c.join(",\n"+gap)+"\n"+a+"]":"["+c.join(",")+"]",gap=a,i}if(rep&&"object"==typeof rep)for(n=rep.length,r=0;r<n;r+=1)"string"==typeof rep[r]&&(i=str(o=rep[r],u))&&c.push(quote(o)+(gap?": ":":")+i);else for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(i=str(o,u))&&c.push(quote(o)+(gap?": ":":")+i);return i=0===c.length?"{}":gap?"{\n"+gap+c.join(",\n"+gap)+"\n"+a+"}":"{"+c.join(",")+"}",gap=a,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,r){var o;if(indent=gap="","number"==typeof r)for(o=0;o<r;o+=1)indent+=" ";else"string"==typeof r&&(indent=r);if((rep=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var r,o,i=e[t];if(i&&"object"==typeof i)for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(void 0!==(o=walk(i,r))?i[r]=o:delete i[r]);return reviver.call(e,t,i)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){"use strict";var N=e.CQuotient=window.CQuotient||(e.CQuotient={});N.VERSION="v2.19.4";var R=0,C=[],U=!0,j=!1;function D(){return N.useTest?"staging.cquotient.com":"cquotient.com"}var A="__UNDEFINED__";function J(e){return null!=e&&e!==A}function n(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){if("sortDetails"===r){t.push(r+"::OMITTED_BY_GRETEL");continue}t.push(r+"::"+e[r])}return t.join("||")}function c(e){for(var t=[],r=0;r<e.length;r++){var o=e[r];"[object Object]"===Object.prototype.toString.call(o)?t.push(n(o)):t.push(o)}return t.join(";;")}function E(t){try{return JSON.parse(t)}catch(e){return{error:"The response is not valid JSON.",response:t}}}function i(e){var t=new RegExp(["%23","%24","%26","%2B","%5E","%60","%7C","%2F","%3A","%3C","%3D","%3E","%3F","%40","%5B","%5D","%7B","%7D"].join("|"),"g"),r=encodeURIComponent(e);return r=r.replace(t,decodeURIComponent)}function _(e,t){var r=i(t.value)||"",o=i(e)+"="+r+";";t.domain&&(o+=" domain="+t.domain+";"),t.path&&(o+=" path="+t.path+";"),t.expires&&(o+=" expires="+t.expires+";"),document.cookie=o}N.byteLength=function(e){for(var t=e.length,r=0,o=e.length;r<o;r++){var i=e.charCodeAt(r);127<i&&i<=2047?t++:2047<i&&i<=65535&&(t+=2),55296<=i&&i<=56319&&r++}return t};var a={"},{":"-~-",'"id":':"i~%",',"sku":""':"s~!",',"sku":':"s~%"};function u(e){var t=JSON.stringify(e);for(var r in a)if(a.hasOwnProperty(r)){var o=new RegExp(r,"g");t=t.replace(o,a[r])}return i(t)}function P(t,e,r,o){try{window.sessionStorage.setItem("cq."+e,JSON.stringify(t))}catch(e){4e3<N.byteLength(u(t))+document.cookie.length?N.sendActivity(o,"error",{time:(new Date).getTime(),error:r+"  too large"}):_(r,{value:u(t),path:"/"})}}N._getTopDomain=function(e){var t,r,o="weird_get_top_level_domain=cookie",i=e.split(".");for(t=i.length-1;0<=t;t--)if(r=i.slice(t).join("."),document.cookie=o+";domain=."+r+";",-1<document.cookie.indexOf(o))return document.cookie=o.split("=")[0]+"=;domain=."+r+";expires=Thu, 01 Jan 1970 00:00:01 GMT;","."+r;return!1};var M=N._getTopDomain(document.location.hostname);function F(){try{for(var e=["cqcid","cquid","__cq_uuid","__cqact","__cqviews","__cq_bc","__cq_seg","__cq_anchor"],t=(e.length,document.cookie.split(";")),r=0,o=t.length;r<o;r++){var i=t[r],n=i.indexOf("="),c=(-1<n?i.substr(0,n):i).trim();-1!==e.indexOf(c)&&(document.cookie=c+"=; path=/; domain="+M+"; expires=Thu, 01 Jan 1970 00:00:00 GMT")}}catch(e){}}function L(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){var o=e[r],i=encodeURIComponent(r)+"=";"[object Object]"===Object.prototype.toString.call(o)?i+=encodeURIComponent(n(o)):"[object Array]"===Object.prototype.toString.call(o)?i+=encodeURIComponent(c(o)):i+=encodeURIComponent(o),t.push(i)}return t.join("&").length<1e3&&t.push("json="+encodeURIComponent(JSON.stringify(e))),t.join("&")}function z(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1").replace(/\+/g,"%20"))||null}function B(e){for(var t=document.cookie.split(";"),r=0,o=t.length;r<o;r++){var i=t[r].trim().split("=");if(0===i[0].indexOf(e))return i[1]}}function w(e){for(var t,r,o=[void 0],i="",n=document.location.hostname.split(".").reverse(),c=0,a=n.length;c<a;c++)i="."+n[c]+i,o.push(i);try{t=z(e)}catch(e){t=void 0}for(var u=0,s=o.length;u<s;u++){var d=o[u];_(e,{domain:d,path:"/",expires:"Thu, 01 Jan 1970 00:00:00 UTC"});try{r=z(e)}catch(e){r=void 0}if(t!==r)return _(e,{value:t,domain:d,path:"/"}),d}}function s(e){_(e,{path:"/",expires:"Thu, 01 Jan 1970 00:00:00 UTC",domain:w(e)})}function V(){var t,r;try{t=window.sessionStorage.getItem("cq.anchor")}catch(e){t=z("__cq_anchor")}try{r=JSON.parse(t)||{}}catch(e){r={}}return r}var Q={customerSignup:["cookieId","userId","emailId"],viewPage:["cookieId","pageId"],viewProduct:["cookieId","product"],search:["cookieId","searchText"],viewSearch:["cookieId","searchText","products"],clickSearch:["cookieId","searchText","product"],viewCategory:["cookieId","categoryId"],clickCategory:["cookieId","categoryId"],viewCart:["cookieId","products"],addToCart:["cookieId","product"],removeFromCart:["cookieId","product"],beginCheckout:["cookieId","products","amount"],finishCheckout:["cookieId","products","amount"],reviewProduct:["cookieId","product","rating"],clickReco:["cookieId","product"],_clickReco:["cookieId","product"],viewWishList:["cookieId"],addToWishList:["cookieId"],removeFromWishList:["cookieId"],viewReco:["cookieId"],servedReco:[],error:[]};function $(e){var t,r;try{(t=z("__cq_bc"))||(t=z("bc")),t&&(t=t.replace(/^j:/,""),t=JSON.parse(t),(r={})[e]=t[e],r=JSON.stringify(r))}catch(e){}return r}function t(e,t){try{var r=window.sessionStorage.getItem("cq."+e);if(!r)return[];try{return JSON.parse(r)}catch(e){return[]}}catch(e){var o=z(t);return o?function(t){try{for(var e in a)if(a.hasOwnProperty(e)){var r=new RegExp(a[e],"g");t=t.replace(r,e)}return JSON.parse(t)}catch(e){return N.sendActivity("cq","error",{time:(new Date).getTime(),error:"Decoding failed on: "+t}),[]}}(o):[]}}function H(){return t("viewReco","__cqviews")}function G(){return t("viewSearch","__cqsviews")}function W(){return t("viewCategory","__cqcviews")}var X={},Y={};var Z={},K={};var ee={},te={};var re=H();try{window.sessionStorage.removeItem("cq.viewReco")}catch(e){document.cookie="__cqviews=;path=/;"}var oe=G();try{window.sessionStorage.removeItem("cq.viewSearch")}catch(e){document.cookie="__cqsviews=;path=/;"}var ie=null,ne=W();try{window.sessionStorage.removeItem("cq.viewCategory")}catch(e){document.cookie="__cqcviews=;path=/;"}var ce=V();try{window.sessionStorage.removeItem("cq.anchor")}catch(e){s("__cq_anchor")}function d(e){return void 0!==e&&""!==e&&null!==e}var r={vgroup:"alt_id",set:"alt_id",bundle:"alt_id"};function p(e){if(e)return e[r[e.type]||"id"]}function ae(e,t){var r=p(e),o=p(t);return d(r)&&d(o)&&r===o}var ue=!1;function se(){return!!z("__cq_uuid")}if(window.setTimeout(function(){ue||!N.clientId||N.activities&&0<N.activities.length||z("__cqact")||N.sendActivity(N.clientId,"viewPage",{cookieId:z("cqcid")})},1e3),N.sendActivity=function(e,t,r,o,i){if(-1!==document.cookie.indexOf("__cq_dnt=1"))return F(),new Image;if(!e)throw new Error("Must provide a clientId");if(!Q.hasOwnProperty(t))throw new Error("Unsupported activity type!");if(ue=!0,r=r||{},"viewReco"===t){if(r.accumulate)return delete r.accumulate,a=e,(s=X[(u=r).recommenderName]=X[u.recommenderName]||[]).push(u.products),clearTimeout(Y[u.recommenderName]),void(Y[u.recommenderName]=window.setTimeout(function(){for(var e=[],t=0;t<s.length;t++)e=e.concat(s[t]);u.products=e,N.sendActivity(a,"viewReco",u);var r=H();r.push({recommenderName:u.recommenderName,cookieId:u.cookieId,userId:u.userId,products:u.products}),P(r,"viewReco","__cqviews",a)},0));var n=V(),c=r.recommenderName;n.hasOwnProperty(c)&&(r.anchors=n[c])}var a,u,s,d,p,l,f,v,m,g,h;if("clickSearch"===t&&(ie=r),"viewSearch"===t&&r.accumulate)return delete r.accumulate,d=e,l=""+(p=r).searchText+p.imageUUID,(f=Z[l]=Z[l]||[]).push(p.products),clearTimeout(K[l]),void(K[l]=window.setTimeout(function(){for(var e=[],t=0;t<f.length;t++)e=e.concat(f[t]);p.products=e,N.sendActivity(d,"viewSearch",p),Z[l]=[];var r=G(),o={refinements:p.refinements,cookieId:p.cookieId,userId:p.userId,products:p.products,personalized:p.personalized,sortingRule:p.sortingRule};J(p.searchText)&&(o.searchText=p.searchText),J(p.imageUUID)&&(o.imageUUID=p.imageUUID),r.push(o),P(r,"viewSearch","__cqsviews",d)},0));if("viewCategory"===t&&r.accumulate)return delete r.accumulate,v=e,g=(m=r).categoryId,(h=ee[g]=ee[g]||[]).push(m.products),clearTimeout(te[g]),void(te[g]=window.setTimeout(function(){for(var e=[],t=0;t<h.length;t++)e=e.concat(h[t]);m.products=e,N.sendActivity(v,"viewCategory",m),ee[g]=[];var r=W();r.push({refinements:m.refinements,categoryId:m.categoryId,cookieId:m.cookieId,userId:m.userId,products:m.products,personalized:m.personalized,sortingRule:m.sortingRule}),P(r,"viewCategory","__cqcviews",v)},0));if("viewProduct"===t){if("raw_sku"===r.product.type)return;!function(e,t){for(var r=0;r<re.length;r++)for(var o=re[r].products,i=0;i<o.length;i++)if(ae(o[i],t)){var n={recommenderName:re[r].recommenderName,product:t,cookieId:re[r].cookieId,userId:re[r].userId,anchors:ce[re[r].recommenderName]};return N.sendActivity(e,"_clickReco",n)}}(e,r.product),function(e,t){for(var r=0;r<oe.length;r++)for(var o=oe[r].products,i=0;i<o.length;i++)if(ae(o[i],t)){var n={refinements:oe[r].refinements,product:t,cookieId:oe[r].cookieId,userId:oe[r].userId,personalized:oe[r].personalized,sortingRule:oe[r].sortingRule};return J(oe[r].searchText)&&(n.searchText=oe[r].searchText),J(oe[r].imageUUID)&&(n.imageUUID=oe[r].imageUUID),N.sendActivity(e,"clickSearch",n)}}(e,r.product),function(e,t){for(var r=0;r<ne.length;r++)for(var o=ne[r].products,i=0;i<o.length;i++)if(ae(o[i],t)){var n={refinements:ne[r].refinements,product:t,categoryId:ne[r].categoryId,cookieId:ne[r].cookieId,userId:ne[r].userId,personalized:ne[r].personalized,sortingRule:ne[r].sortingRule};return N.sendActivity(e,"clickCategory",n)}}(e,r.product)}if("addToCart"===t&&ie&&ie.product.id===r.product.id&&(J(ie.imageUUID)&&(r.imageUUID=ie.imageUUID),J(ie.searchText)&&(r.searchText=ie.searchText)),!("clickReco"===t&&0<re.length)){var y=function(e){for(var t,r=window.location.search.substring(1).split("&"),o=0,i=r.length;o<i;o++){var n=r[o].split("=");if(decodeURIComponent(n[0])===e){t=decodeURIComponent(n[1]);break}}return t}("__cq_eid");y&&(r.emailId=y),"_clickReco"===t&&(t="clickReco"),r.searchText===A&&delete r.searchText,r.imageUUID===A&&delete r.imageUUID,r.referrer=window.document.referrer;var _=z("__cq_uuid");_&&(r.__cq_uuid=_);var w=z("__cq_seg");w&&(r.__cq_seg=w);var I=B("dwpersonalization_");I&&(r.__dw_p=I);var k="https://p."+D()+"/pebble?tla="+e+"&activityType="+t,T=$(e);T&&(r.bc=T),r.ls=function(){try{return window.localStorage.setItem("cq","cq"),window.localStorage.removeItem("cq"),!0}catch(e){return!1}}(),r._=(new Date).getTime();var S="_act_callback"+R++;k+="&callback=CQuotient."+S,r.v=N.VERSION;var b,q=L(r);if(0<q.length&&(k+="&"+q),!se()&&!j){if(!U)return b={clientId:e,activityType:t,params:r,callback:o},void C.push(b);U=!1}if("viewPage"===t){r.categoryId&&(r.category={id:r.categoryId},delete r.categoryId);var O=new XMLHttpRequest;return O.onreadystatechange=function(){O.readyState===XMLHttpRequest.DONE&&(200===O.status&&o?o(E(O.responseText)):200!==O.status&&i&&i(E(O.responseText)))},O.open("POST","https://api.cquotient.com/v3/activities/"+e+"/"+t+"?clientId=522f0d29-60b5-4497-a06d-5fcacd6c8503",!0),O.setRequestHeader("Content-Type","application/json;charset=UTF-8"),void O.send(JSON.stringify(r))}var x=document.createElement("script");return x.src=k,x.type="text/javascript",N[S]=function(e){if("[object Object]"===Object.prototype.toString.call(e)&&(e=[e]),"[object Array]"===Object.prototype.toString.call(e))for(var t=0,r=e.length;t<r;t++)document.cookie=e[t].k+"="+e[t].v+";path=/;domain="+(M||e[t].d)+";max-age="+e[t].m;se()||(j=!0),function(){for(var e=0,t=C.length;e<t;e++){var r=C[e];N.sendActivity(r.clientId,r.activityType,r.params,r.callback)}C=[]}(),delete N[S],x.parentNode.removeChild(x),o&&o()},document.getElementsByTagName("body")[0].appendChild(x),new Image}},N.clientId&&N.activities&&0<N.activities.length){for(var o=0;o<N.activities.length;o++){var l=N.activities[o];N.sendActivity(N.clientId,l.activityType,l.parameters)}N.activities=[]}function f(){if(N.clientId)try{var e=z("__cqact");if(!e)return void window.setTimeout(f,100);var t=JSON.parse(e);if(!t[0])return s("__cqact"),void window.setTimeout(f,100);N.sendActivity(N.clientId,t[0].activityType,t[0].parameters,function(){!function(e){try{var t=z("__cqact");if(!t)return f();for(var r=JSON.stringify(e.parameters.product||e.parameters.products),o=JSON.parse(t),i=w("__cqact"),n=0,c=o.length;n<c;n++)if(o[n].activityType===e.activityType&&JSON.stringify(o[n].parameters.product||o[n].parameters.products)===r){if(o.splice(n,1),_("__cqact",{value:JSON.stringify(o),domain:i,path:"/"}),JSON.parse(z("__cqact")).length===c)throw new Error("error deleting activity cookie");break}f()}catch(e){N.sendActivity(N.clientId,"error",{time:(new Date).getTime(),caughtError:e}),s("__cqact")}}(t[0])})}catch(e){N.sendActivity(N.clientId,"error",{time:(new Date).getTime(),caughtError:e}),s("__cqact")}}f();var I=["ipad","iphone","android","windows","mac"];var k={pdp:!0,topsellers:!0,v2v:!0};if(N.getRecs=function(r,e,o,i,n){var c=new Date;if(r)if(e){o=o||{};var t=z("__cq_uuid");t&&(o.__cq_uuid=t);var a=!1;for(var u in k)k.hasOwnProperty(u)&&0<=e.indexOf(u)&&(a=k[u]);var s,d=o.timeoutMs||5e3,p="_callback"+R++,l="recs/"+r+"/"+e+"?callback=CQuotient."+p;if(s=a?"r":(l+="&_="+(new Date).getTime(),"e"),o.filters){var f=o.filters;delete o.filters,f.fieldsToMatchToValue&&(o.filter_fieldsToMatchToValue=f.fieldsToMatchToValue)}e&&o.hasOwnProperty("anchors")&&function(e,t){if(e){var r=V(),o=t.map(function(e){return e.type&&"vgroup"===e.type&&e.alt_id?e.alt_id:e.id});r[e]=o;var i=JSON.stringify(r);try{window.sessionStorage.setItem("cq.anchor",i)}catch(e){_("__cq_anchor",{value:i,domain:w("__cq_anchor"),path:"/"})}}}(e,o.anchors),o.v=N.VERSION,l+="&_device="+function(e){e=e.toLowerCase();for(var t=0;t<I.length;t++){var r=I[t];if(0<=e.indexOf(r))return r}return"other"}(navigator.userAgent);var v=$(r);v&&(o.bc=v);var m=L(o);0<m.length&&(l+="&"+m);var g=document.createElement("script");g.src="https://"+s+"."+D()+"/"+l,g.type="text/javascript";var h=window.setTimeout(function(){try{n&&n({errorMessage:"Reco request timed out for recommender: "+e})}finally{y()}},d);N[p]=function(t){try{if("[object Object]"===Object.prototype.toString.call(t))try{i(t)}catch(e){N.sendActivity(r,"error",{time:new Date-c,recoRequestParams:o,recoResponse:t,caughtError:e})}finally{N.sendActivity(r,"servedReco",{time:new Date-c,recommenderName:e,recoRequestParams:o,recoResponse:t})}else if(n)try{n(t)}finally{N.sendActivity(r,"error",{time:new Date-c,recoRequestParams:o,recoResponse:t})}}catch(e){N.sendActivity(r,"error",{time:new Date-c,recoRequestParams:o,recoResponse:t,caughtError:e})}finally{y()}},document.getElementsByTagName("body")[0].appendChild(g)}else n&&n({errorMessage:'Invalid value for "recommenderName":'+e});else n&&n({errorMessage:'Invalid value for "clientId":'+r});function y(){delete N[p],g.parentNode.removeChild(g),window.clearTimeout(h)}},N.autoSendActivities=function(){for(var e=B("dwanonymous_"),t=z("cquid"),r=document.querySelectorAll("[data-einstein-activity]"),o=0;o<r.length;o++){var i=r[o],n=i.getAttribute("data-einstein-activity");i.removeAttribute("data-einstein-activity");try{n=JSON.parse(n)}catch(e){N.sendActivity(N.clientId,"error",{time:(new Date).getTime(),caughtError:"Failed to parse activity data attribute: "+n})}var c=n.attributes;if(c.cookieId=c.cookieId||e,c.userId=c.userId||t,c.accumulate=!0,"addToCart"===n.activity)return void i.addEventListener("click",function(){N.sendActivity(N.clientId,n.activity,c)});N.sendActivity(N.clientId,n.activity,c)}},N.autoActivitiesEnabled&&(window.setTimeout(function(){N.autoSendActivities()},100),window.setInterval(function(){N.autoSendActivities()},3e3)),N.enableDNT=function(){_("__cq_dnt",{domain:M,value:1,expires:new Date(Date.now()+189216e5)}),F()},N.disableDNT=function(){_("__cq_dnt",{domain:M,value:0,expires:new Date(Date.now()+189216e5)})},N.clientId&&N.widgets&&0<N.widgets.length){for(var v=0;v<N.widgets.length;v++){var m=N.widgets[v];N.getRecs(N.clientId,m.recommenderName,m.parameters,m.callback,m.errorCallback)}N.widgets=[]}}("undefined"!=typeof module&&module.exports?exports:window);
